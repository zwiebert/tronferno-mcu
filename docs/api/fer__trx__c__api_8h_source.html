<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>tronferno-mcu: fernotron_trx/fer_trx_c_api.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">tronferno-mcu
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('fer__trx__c__api_8h_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">fer_trx_c_api.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="fer__trx__c__api_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * \file        fernotron_trx/fer_trx_c_api.h</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * \brief       C-API for sending and receiving Fernotron RF messages.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160; </div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#</span><span class="preprocessor">pragma</span> <span class="preprocessor">once</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160; </div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#</span><span class="preprocessor">ifdef</span> __cplusplus</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;  <span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#</span><span class="preprocessor">endif</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160; </div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#</span><span class="preprocessor">include</span> <span class="preprocessor">&lt;</span><span class="preprocessor">utils_misc</span><span class="preprocessor">/</span><span class="preprocessor">int_types</span><span class="preprocessor">.</span><span class="preprocessor">h</span><span class="preprocessor">&gt;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#</span><span class="preprocessor">include</span> <span class="preprocessor">&lt;</span><span class="preprocessor">fernotron_trx</span><span class="preprocessor">/</span><span class="preprocessor">timer_data</span><span class="preprocessor">.</span><span class="preprocessor">h</span><span class="preprocessor">&gt;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#</span><span class="preprocessor">include</span> <span class="preprocessor">&lt;</span><span class="preprocessor">time</span><span class="preprocessor">.</span><span class="preprocessor">h</span><span class="preprocessor">&gt;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160; </div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#</span><span class="preprocessor">define</span> <span class="preprocessor">FER_ADDR_TYPE_PlainSender</span>  0x10 <span class="comment">///&lt; Fernotron device type plain sender</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#</span><span class="preprocessor">define</span> <span class="preprocessor">FER_ADDR_TYPE_SunSensor</span>     0x20 <span class="comment">///&lt; Fernotron device type sun-sensor</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#</span><span class="preprocessor">define</span> <span class="preprocessor">FER_ADDR_TYPE_CentralUnit</span>   0x80 <span class="comment">///&lt; Fernotron device type central unit</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#</span><span class="preprocessor">define</span> <span class="preprocessor">FER_ADDR_TYPE_Receiver</span>      0x90 <span class="comment">///&lt; Fernotron device type motor (0x9xxxxx: code written on motor label)</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160; </div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> * \brief       Match type of device address</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> * \param a     device address</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> * \param t     type</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"> * \return      true for match</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="fer__trx__c__api_8h.html#a2642e65d186d85623e50bb43e0c49ed5">FER_U32_TEST_TYPE</a>(uint32_t a, <span class="keywordtype">unsigned</span> t) {</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;  <span class="keywordflow">return</span> (a &gt;&gt; 16) == t;</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;}</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160; </div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">/// \brief Fernotron command codes.</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="keyword">typedef</span> <span class="keyword">enum</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#</span><span class="preprocessor">ifdef</span> __cplusplus</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;: uint8_t</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#</span><span class="preprocessor">endif</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  {</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  fer_if_cmd_None,</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  fer_if_cmd_1,</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  fer_if_cmd_2,</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  <a class="code" href="fer__trx__c__api_8h.html#a660a0cd55bd5326495352aae546ebabaac7563e96a5a3793340e9984d5da45884">fer_if_cmd_STOP</a>,   <span class="comment">///&lt; stop motor</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <a class="code" href="fer__trx__c__api_8h.html#a660a0cd55bd5326495352aae546ebabaa96d32939d2e6b132a582cd69fc487d5e">fer_if_cmd_UP</a>,     <span class="comment">///&lt; run motor &#39;up&#39;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  <a class="code" href="fer__trx__c__api_8h.html#a660a0cd55bd5326495352aae546ebabaaf55b50f494b59d7d647dcf7e38687805">fer_if_cmd_DOWN</a>,   <span class="comment">///&lt; run motor &#39;down&#39;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  <a class="code" href="fer__trx__c__api_8h.html#a660a0cd55bd5326495352aae546ebabaaa93116c1cf0ee89bde0179b30defa9bc">fer_if_cmd_SunDOWN</a>,  <span class="comment">///&lt; run motor &#39;down&#39; until sun position is reached (works only if sun auto is enabled)</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  <a class="code" href="fer__trx__c__api_8h.html#a660a0cd55bd5326495352aae546ebabaaaaddf97c8b2b7f68fd59d4f7fc127604">fer_if_cmd_SunUP</a>,   <span class="comment">///&lt; run motor &#39;up&#39; (run motor up if both prior command was SunDOWN and motor position is above or equal sun-position)</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  <a class="code" href="fer__trx__c__api_8h.html#a660a0cd55bd5326495352aae546ebabaa07b6252c26577bdf3bab0556a3f6daaa">fer_if_cmd_SunINST</a>,  <span class="comment">///&lt; set current position as sun position</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <a class="code" href="fer__trx__c__api_8h.html#a660a0cd55bd5326495352aae546ebabaa95dd473931ca2496509ec78732bf835f">fer_if_cmd_EndPosUP</a>, <span class="comment">///&lt; move motor &#39;up&#39; until &#39;stop&#39; is sent (the position at stop is saved as end position)</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <a class="code" href="fer__trx__c__api_8h.html#a660a0cd55bd5326495352aae546ebabaa7d1134de583ecac9a7cfa2cf2e06b89f">fer_if_cmd_EndPosDOWN</a>, <span class="comment">///&lt; move motor &#39;down&#39; until &#39;stop&#39; is sent (the position at &#39;stop&#39; is saved as end position)</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  <a class="code" href="fer__trx__c__api_8h.html#a660a0cd55bd5326495352aae546ebabaaefe68eff4dc2847051d3ad40bf7285a0">fer_if_cmd_ToggleRotationDirection</a>, <span class="comment">///&lt; toggles motor rotation direction (used to match up/down commands with real shutter movement)</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  fer_if_cmd_0xc,</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  <a class="code" href="fer__trx__c__api_8h.html#a660a0cd55bd5326495352aae546ebabaa43bc12c60c8b078650d8c260de0c44ec">fer_if_cmd_SET</a>,   <span class="comment">///&lt; activates set function to add or remove a controller</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  fer_if_cmd_0xe,</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <a class="code" href="fer__trx__c__api_8h.html#a660a0cd55bd5326495352aae546ebabaa4105b8aa688fb1825bb28338bd1967bf">fer_if_cmd_Program</a> <span class="comment">///&lt; RTC/TImer data (or Sun-Test if dat_MEMB=fer_memb_SUN)</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;} fer_if_cmd;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160; </div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">/// \brief Vocabulary type of a plain command message</span></div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="structFer__MsgPlainCmd.html">   56</a></span>&#160;<span class="keyword">struct</span> <a class="code" href="structFer__MsgPlainCmd.html">Fer_MsgPlainCmd</a> {</div>
<div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="structFer__MsgPlainCmd.html#a6981fa43ff2bff2489f0a73fc8b50bf5">   57</a></span>&#160;  <a class="code" href="structFer__MsgPlainCmd.html#a6981fa43ff2bff2489f0a73fc8b50bf5">uint32_t</a> <a class="code" href="structFer__MsgPlainCmd.html#a6981fa43ff2bff2489f0a73fc8b50bf5">a</a>; <span class="comment">///&lt; ID/address of device</span></div>
<div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="structFer__MsgPlainCmd.html#abc6be25e9cced5215f6f5668846b154c">   58</a></span>&#160;  <a class="code" href="structFer__MsgPlainCmd.html#abc6be25e9cced5215f6f5668846b154c">uint8_t</a> <a class="code" href="structFer__MsgPlainCmd.html#abc6be25e9cced5215f6f5668846b154c">g</a>; <span class="comment">///&lt; group number (if central unit device)</span></div>
<div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="structFer__MsgPlainCmd.html#a13d6fd376e20835345bdf4a5f66e02bf">   59</a></span>&#160;  <a class="code" href="structFer__MsgPlainCmd.html#a13d6fd376e20835345bdf4a5f66e02bf">uint8_t</a> <a class="code" href="structFer__MsgPlainCmd.html#a13d6fd376e20835345bdf4a5f66e02bf">m</a>;  <span class="comment">///&lt; group-member number (if central unit device)</span></div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="structFer__MsgPlainCmd.html#a41127c06d799e8ef40357af7a126b53a">   60</a></span>&#160;  fer_if_cmd <a class="code" href="structFer__MsgPlainCmd.html#a41127c06d799e8ef40357af7a126b53a">cmd</a>; <span class="comment">///&lt; Fernotron command code</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;};</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160; </div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">/// \brief Vocabulary type of a plain command message with values to control the transmitting</span></div>
<div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="structFer__MsgCmd.html">   64</a></span>&#160;<span class="keyword">struct</span> <a class="code" href="structFer__MsgCmd.html">Fer_MsgCmd</a> {</div>
<div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="structFer__MsgCmd.html#aadd1ddfe6e427fe73f3924143ac8260c">   65</a></span>&#160;  <a class="code" href="structFer__MsgCmd.html#aadd1ddfe6e427fe73f3924143ac8260c">uint32_t</a> <a class="code" href="structFer__MsgCmd.html#aadd1ddfe6e427fe73f3924143ac8260c">a</a>; <span class="comment">///&lt; ID/address of device</span></div>
<div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="structFer__MsgCmd.html#a84edaad43c1ef1de3ecf3e494b432026">   66</a></span>&#160;  <a class="code" href="structFer__MsgCmd.html#a84edaad43c1ef1de3ecf3e494b432026">uint8_t</a> <a class="code" href="structFer__MsgCmd.html#a84edaad43c1ef1de3ecf3e494b432026">g</a>; <span class="comment">///&lt; group number (if central unit device)</span></div>
<div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="structFer__MsgCmd.html#a0ade43adbb24e944502efde4806d05f7">   67</a></span>&#160;  <a class="code" href="structFer__MsgCmd.html#a0ade43adbb24e944502efde4806d05f7">uint8_t</a> <a class="code" href="structFer__MsgCmd.html#a0ade43adbb24e944502efde4806d05f7">m</a>;  <span class="comment">///&lt; group-member number (if central unit device)</span></div>
<div class="line"><a name="l00068"></a><span class="lineno"><a class="line" href="structFer__MsgCmd.html#a3fc9e0f998019213a01bc8ed22831e44">   68</a></span>&#160;  fer_if_cmd <a class="code" href="structFer__MsgCmd.html#a3fc9e0f998019213a01bc8ed22831e44">cmd</a>; <span class="comment">///&lt; Fernotron command code.</span></div>
<div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="structFer__MsgCmd.html#acb6763a889e95353d972380bc5f03bb2">   69</a></span>&#160;  <a class="code" href="structFer__MsgCmd.html#acb6763a889e95353d972380bc5f03bb2">uint8_t</a> <a class="code" href="structFer__MsgCmd.html#acb6763a889e95353d972380bc5f03bb2">repeats</a>; <span class="comment">///&lt; Repeat the transmission REPEATS times.</span></div>
<div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="structFer__MsgCmd.html#ab5353902428bcde197c50cf433fc89fe">   70</a></span>&#160;  <a class="code" href="structFer__MsgCmd.html#ab5353902428bcde197c50cf433fc89fe">uint16_t</a> <a class="code" href="structFer__MsgCmd.html#ab5353902428bcde197c50cf433fc89fe">delay</a>;  <span class="comment">///&lt; Delay the transmission by DELAY (in s/10).</span></div>
<div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="structFer__MsgCmd.html#a79d2aecab9e75e190edac9418ec52074">   71</a></span>&#160;  <a class="code" href="structFer__MsgCmd.html#a79d2aecab9e75e190edac9418ec52074">uint16_t</a> <a class="code" href="structFer__MsgCmd.html#a79d2aecab9e75e190edac9418ec52074">stopDelay</a>; <span class="comment">///&lt; Send a STOP command after STOP_DELAY (in s/10).</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;};</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160; </div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">/// \brief Vocabulary type of a message to set the RTC</span></div>
<div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="structFer__MsgRtc.html">   75</a></span>&#160;<span class="keyword">struct</span> <a class="code" href="structFer__MsgRtc.html">Fer_MsgRtc</a>  {</div>
<div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="structFer__MsgRtc.html#a1e7c9b16084b3884c15fc68050d1c91a">   76</a></span>&#160;  <a class="code" href="structFer__MsgRtc.html#a1e7c9b16084b3884c15fc68050d1c91a">uint32_t</a> <a class="code" href="structFer__MsgRtc.html#a1e7c9b16084b3884c15fc68050d1c91a">a</a>; <span class="comment">///&lt; ID/address of device</span></div>
<div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="structFer__MsgRtc.html#a25d24279439edc79bef68112a652623c">   77</a></span>&#160;  <a class="code" href="structFer__MsgRtc.html#a25d24279439edc79bef68112a652623c">uint8_t</a> <a class="code" href="structFer__MsgRtc.html#a25d24279439edc79bef68112a652623c">g</a>; <span class="comment">///&lt; group number (if central unit device)</span></div>
<div class="line"><a name="l00078"></a><span class="lineno"><a class="line" href="structFer__MsgRtc.html#a802290bd7166f95fd93697de996d3154">   78</a></span>&#160;  <a class="code" href="structFer__MsgRtc.html#a802290bd7166f95fd93697de996d3154">uint8_t</a> <a class="code" href="structFer__MsgRtc.html#a802290bd7166f95fd93697de996d3154">m</a>;  <span class="comment">///&lt; group-member number (if central unit device)</span></div>
<div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="structFer__MsgRtc.html#ac5926c888beee37dc3c134741fc9d915">   79</a></span>&#160;  time_t <a class="code" href="structFer__MsgRtc.html#ac5926c888beee37dc3c134741fc9d915">rtc</a>; <span class="comment">///&lt; time value to set the built-in RTC</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;};</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160; </div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">/// \brief Vocabulary type of a message to set the RTC and any automatics/timers</span></div>
<div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="structFer__MsgTimer.html">   83</a></span>&#160;<span class="keyword">struct</span> <a class="code" href="structFer__MsgTimer.html">Fer_MsgTimer</a> {</div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="structFer__MsgTimer.html#aa3efaa62fa8dc601aa10ab4f67aae604">   84</a></span>&#160;  <a class="code" href="structFer__MsgTimer.html#aa3efaa62fa8dc601aa10ab4f67aae604">uint32_t</a> <a class="code" href="structFer__MsgTimer.html#aa3efaa62fa8dc601aa10ab4f67aae604">a</a>; <span class="comment">///&lt; ID/address of device</span></div>
<div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="structFer__MsgTimer.html#a607e0e51868c79422f20922f9869302c">   85</a></span>&#160;  <a class="code" href="structFer__MsgTimer.html#a607e0e51868c79422f20922f9869302c">uint8_t</a> <a class="code" href="structFer__MsgTimer.html#a607e0e51868c79422f20922f9869302c">g</a>; <span class="comment">///&lt; group number (if central unit device)</span></div>
<div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="structFer__MsgTimer.html#a581bf68b330a915ffbc315c449b33905">   86</a></span>&#160;  <a class="code" href="structFer__MsgTimer.html#a581bf68b330a915ffbc315c449b33905">uint8_t</a> <a class="code" href="structFer__MsgTimer.html#a581bf68b330a915ffbc315c449b33905">m</a>;  <span class="comment">///&lt; group-member number (if central unit device)</span></div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="structFer__MsgTimer.html#a414d86295a87380a16d621ee8cc52363">   87</a></span>&#160;  time_t <a class="code" href="structFer__MsgTimer.html#a414d86295a87380a16d621ee8cc52363">rtc</a>; <span class="comment">///&lt; time value to set the built-in RTC</span></div>
<div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="structFer__MsgTimer.html#a88d9f4e74d61f1f037264abc36c5531d">   88</a></span>&#160;  <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structFer__TimerData.html">Fer_TimerData</a> *<a class="code" href="structFer__MsgTimer.html#a88d9f4e74d61f1f037264abc36c5531d">td</a>; <span class="comment">///&lt; automatics/timer data</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;};</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160; </div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment"> * \brief    Enqueue a message to be transmitted</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment"> * \return   message successfully enqueued</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="fer__trx__c__api_8h.html#a907ddd987283e4dae38be6c76fb00f7f">fer_trx_send_cmd</a>(<span class="keyword">const</span> <a class="code" href="structFer__MsgCmd.html">Fer_MsgCmd</a> *msg);</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160; </div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment"> * \brief    Enqueue a message to be transmitted</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment"> * \return   message successfully enqueued</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="fer__trx__c__api_8h.html#af7bf8f026596188a52d809411aab9865">fer_trx_send_rtc</a>(<span class="keyword">const</span> <a class="code" href="structFer__MsgRtc.html">Fer_MsgRtc</a> *msg);</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160; </div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment"> * \brief    Enqueue a message to be transmitted</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment"> * \return   message successfully enqueued</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="fer__trx__c__api_8h.html#ad8eb82459ab6db33997e1644c210e4f5">fer_trx_send_timer</a>(<span class="keyword">const</span> <a class="code" href="structFer__MsgTimer.html">Fer_MsgTimer</a> *msg);</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160; </div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment"> * \brief    Enqueue a message to be transmitted</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment"> * \return   message successfully enqueued</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="fer__trx__c__api_8h.html#a891befca7bac2b2704dd08b98537c46d">fer_trx_send_empty_timer</a>(<span class="keyword">const</span> <a class="code" href="structFer__MsgRtc.html">Fer_MsgRtc</a> *msg);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160; </div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">void</span> (*CallBackFnType)(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160; </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment"> * \brief  Event callback:  A message has been received</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment"> * \note   The callback must be placed in IRAM, because its called from ISR</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> (*<a class="code" href="fer__trx__c__api_8h.html#a904d91fc5708619ac82c96bbf2ba6741">fer_rx_MSG_RECEIVED_ISR_cb</a>)(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160; </div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment"> * \brief  Event callback:  A message has been completely transmitted</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment"> * \note   The callback must be placed in IRAM, because its called from ISR</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> (*<a class="code" href="fer__trx__c__api_8h.html#ab785c6cae7f5e04fb2945298ffd23147">fer_tx_MSG_TRANSMITTED_ISR_cb</a>)(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160; </div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment"> * \brief          Will be called if the next delayed message is ready for transmission in TIME_TS</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment"> * \note           You can use this to start a timer interval which will call @ref fer_tx_loop   after TIME_TS.</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment"> *                 Until then there is no work to do. So calling fer_tx_loo would be wasteful.</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment"> * \param time_ts  Duration (in s/10) until the next message is ready for transmission</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> (*<a class="code" href="fer__trx__c__api_8h.html#af172cdc09301e59111ef2403b3eb33eb">fer_tx_READY_TO_TRANSMIT_cb</a>)(uint32_t time_ts);</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160; </div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment"> * \brief   Do work.</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment"> * \note    Call this from main thread in reaction to @ref fer_tx_MSG_TRANSMITTED_ISR_cb   calls.</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment"> * \note    Call this also from a timer interval in main thread, after pushing a delayed message (to avoid polling)</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment"> * \note    Setup that interval in reaction to @ref fer_tx_READY_TO_TRANSMIT_cb </span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fer__trx__c__api_8h.html#aa5fcb698bd334af45a24dc29a4859fae">fer_tx_loop</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160; </div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment"> * \brief  Do some work</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment"> * \note   Should be called from main thread as reaction to @ref fer_rx_MSG_RECEIVED_ISR_cb .</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fer__trx__c__api_8h.html#a1caafb42f98dd351127799fc8dcce79e">fer_rx_loop</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160; </div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment"> * \brief           Set RF output pin according to the state in the transmitter</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment"> * \note            Calls this from the top of a precise timer ISR.</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="fer__trx__c__api_8h.html#a074af9d3fce403803dc00708fc8633f9">fer_tx_setOutput</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160; </div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment"> * \brief            Do some work in receiving a message</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment"> * \param rx_pin_lvl Level of RX pin sampled at begin of timer ISR callback</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment"> * \note             Call this from timer ISR with 200us / FREQ_MULT (= 5kHz * FREQ_MULT).</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fer__trx__c__api_8h.html#aafca81436bd40a02a4d6fbdd736b29de">fer_rx_tick</a>(<span class="keywordtype">bool</span> rx_pin_lvl);</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160; </div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160; </div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment"> * \brief     Do some work in transmitting a message</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment"> * \note      Should be called from a timer ISR with  200us (= 5kHz)</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment"> * \note      Timing is less critical, because the output pin is set separately by @ref fer_tx_setOutput .</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fer__trx__c__api_8h.html#af5e5bde34639ed1e964438cee7bd0329">fer_tx_dck</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160; </div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160; </div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="preprocessor">#</span><span class="preprocessor">ifdef</span> __cplusplus</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  }</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="preprocessor">#</span><span class="preprocessor">endif</span></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_7f852cf003bf0a82b92f7cba237f50d9.html">fernotron_trx</a></li><li class="navelem"><a class="el" href="fer__trx__c__api_8h.html">fer_trx_c_api.h</a></li>
    <li class="footer">Generated on Wed Dec 11 2024 19:24:29 for tronferno-mcu by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
